{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from \"izitoast\"\n\nconst refs = {\n  form: document.querySelector(\"form\"),\n  inputs: document.querySelectorAll(\"input\"),\n};\n\nrefs.form.addEventListener(\"submit\", onFormSubmit);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  let values = {};\n  [...refs.inputs].map((el) => (values[el.name] = Number(el.value)));\n  const { delay, step, amount } = values;\n\n  for (let i = 0; i < amount; i++) {\n    let delayWithStep = delay + i * step;\n    setTimeout(() => {\n      createPromise(i + 1, delayWithStep)\n        .then(({ position, delay }) => {\n          showToast(`✅ Fulfilled promise ${position} in ${delay}ms`, \"res\");\n        })\n        .catch(({ position, delay }) => {\n          showToast(`❌ Rejected promise ${position} in ${delay}ms`);\n        });\n    }, delayWithStep);\n  }\n  refs.form.reset();\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  const result = { position, delay };\n  return new Promise((res, rej) => {\n    if (shouldResolve) {\n      res(result);\n    } else {\n      rej(result);\n    }\n  });\n}\n\nfunction showToast(text, string) {\n  iziToast.show({\n    title: \"Notice\",\n    message: text,\n    position: \"topRight\",\n    color: string ? \"green\" : \"red\",\n    transitionIn: \"fadeInDown\",\n  });\n}\n"],"names":["refs","onFormSubmit","e","values","el","delay","step","amount","i","delayWithStep","createPromise","position","showToast","shouldResolve","result","res","rej","text","string","iziToast"],"mappings":"wIAEA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,MAAM,EACnC,OAAQ,SAAS,iBAAiB,OAAO,CAC3C,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAY,EAEjD,SAASA,EAAaC,EAAG,CACvBA,EAAE,eAAc,EAChB,IAAIC,EAAS,CAAA,EACb,CAAC,GAAGH,EAAK,MAAM,EAAE,IAAKI,GAAQD,EAAOC,EAAG,MAAQ,OAAOA,EAAG,KAAK,CAAE,EACjE,KAAM,CAAE,MAAAC,EAAO,KAAAC,EAAM,OAAAC,CAAM,EAAKJ,EAEhC,QAASK,EAAI,EAAGA,EAAID,EAAQC,IAAK,CAC/B,IAAIC,EAAgBJ,EAAQG,EAAIF,EAChC,WAAW,IAAM,CACfI,EAAcF,EAAI,EAAGC,CAAa,EAC/B,KAAK,CAAC,CAAE,SAAAE,EAAU,MAAAN,KAAY,CAC7BO,EAAU,uBAAuBD,QAAeN,MAAW,KAAK,CAC1E,CAAS,EACA,MAAM,CAAC,CAAE,SAAAM,EAAU,MAAAN,KAAY,CAC9BO,EAAU,sBAAsBD,QAAeN,KAAS,CAClE,CAAS,CACJ,EAAEI,CAAa,CACjB,CACDT,EAAK,KAAK,OACZ,CAEA,SAASU,EAAcC,EAAUN,EAAO,CACtC,MAAMQ,EAAgB,KAAK,OAAM,EAAK,GAChCC,EAAS,CAAE,SAAAH,EAAU,MAAAN,GAC3B,OAAO,IAAI,QAAQ,CAACU,EAAKC,IAAQ,CAC3BH,EACFE,EAAID,CAAM,EAEVE,EAAIF,CAAM,CAEhB,CAAG,CACH,CAEA,SAASF,EAAUK,EAAMC,EAAQ,CAC/BC,EAAS,KAAK,CACZ,MAAO,SACP,QAASF,EACT,SAAU,WACV,MAAOC,EAAS,QAAU,MAC1B,aAAc,YAClB,CAAG,CACH"}